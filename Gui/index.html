<!DOCTYPE html>
<html>
<head>
    
	<title>Megamip picture, video and web search</title>
    <link rel="stylesheet" type="text/css" href="css-js/style.css" />

        
	  
	  
    	<!--  jQuery library ------>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
	<script type="text/javascript" src="css-js/jquery-1.10.1.min.js"></script>
        <script type="text/javascript" src="css-js/jquery.mobile-1.0a3.min.js"></script>
				
	<!-- Fancybox -------------->
        
	<!-- 
        <script type="text/javascript" src="css-js/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
	<link rel="stylesheet" type="text/css" href="css-js/fancybox/jquery.fancybox-1.3.4.css" media="screen" />
        -->
         <script type="text/javascript" src="css-js/jquery.fancybox.js?v=2.1.5"></script>
	<link rel="stylesheet" type="text/css" href="css-js/jquery.fancybox.css?v=2.1.5" media="screen" />
	
	<!-- youtube API ----------->
         <script src="http://www.youtube.com/player_api"></script>
				





	
 <style type="text/css">
 #principal { display:none;}
 </style>    
    
</head>
<body>

    <div id='eyes' style='background-color: black; color:black;'>
        
        <br><br><br>    <br><br><br>
        
		      <img src="img/eye001.png">
		      
		           <br><br><br>    <br><br><br>    <br><br><br>

   </div>
<div  id="principal"> 

	<div  id="results"> 
	</div>
</div>
<!--      ...........................--------.------------------------------.........            -->

<script>
var index = 0;
var selectedItem = null;
$(document).ready(function () {	
	
     
 
      
//  hideCenterPanel();     
        
        
         
     
		
});

function next(){

      // unselect the current item 
     $("[data-wow-index ='"+ index+"']")
             .removeClass("selected")
             .addClass("not-selected");
      // select the next one  
        index++;
         index = index %8;
         
     $("[data-wow-index ='"+ index+"']")
             .removeClass("not-selected")
             .addClass("selected");
    
 
   
}
function show(){
    
    selectedItem = $("[data-wow-index ='"+ index+"'] a").trigger("click");
 
    
}

function go(){
    index = 0;
   var keyword = $("#txt_input").val();
   $("#results").empty();
   googleSearch( keyword);
     
}

function clearScreen(){
    
    index = 0;
    $("#results").empty();
  
}
function back(){
    
    
    
    $('.fancybox-close').trigger('click');
    
   // parent.jQuery.fancybox.close()
  // $.fancybox.close()  
  
 // var esc = $.Event("keydown", {keyCode:27});
  // $('.fancybox-wrap').tap();
 // var x = $('.fancybox-opened');
  //alert(x);
    // $.fancybox.close
 // $('.fancybox-opened')
}


function showEyes(){
 $("#eyes").slideDown("slow");
}
function hideEyes(){
  $("#eyes").slideUp("slow");   
}
function showCenterPanel(){
     $("#principal").slideDown("slow");   
}
function hideCenterPanel() {
     $("#principal").slideUp("slow");   
}




//--------------------------------------------




function pictureSearch(keyword){
    
   
  
	var apiURL = 'http://ajax.googleapis.com/ajax/services/search/'+"images"+
                        '?v=1.0&callback=?';
	
	$.getJSON(apiURL,{
		    q	: keyword,
		    rsz	:8,
		    start	: 0
		},function(data){
		
		var content = "";
			for(var i = 0; i < data.responseData.results.length; i++){
			content = "<div class='pic not-selected' data-wow-index='"+i+"' >"+
                                  "<a href='"+data.responseData.results[i].url+"'>"+
                                  "<img src='"+data.responseData.results[i].tbUrl + "'/>"+
                                  "</a>"+
                                  "</div>";
                          
			  $('#results').append(content);
			}	
                        
                         //-- select the first item
                          var s =  $('.pic').first()
                                  .removeClass("not-selected")
                                  .addClass("selected");
                          
                          //--FancyBox --
                               $("a").fancybox({
				'overlayShow'	: false,
				'transitionIn'	: 'elastic',
				'transitionOut'	: 'elastic'
			});

                       
                       
		}
	);
}

// video search functions  -------------------------------


function videoSearch(keyword){
    
   
  
	var apiURL = 'http://ajax.googleapis.com/ajax/services/search/'+'video'+
                        '?v=1.0&callback=?';
	
	$.getJSON(apiURL,{
		    q	: keyword,
		    rsz	:8,
		    start	: 0
		},function(data){
		var content = "";
			for(var i = 0; i < data.responseData.results.length; i++){
			content = "<div class='pic not-selected' data-wow-index='"+i+"' >"+
                                  "<a class='fancybox fancybox.iframe' href='"+data.responseData.results[i].playUrl+"'>"+
                                  "<img src='"+data.responseData.results[i].tbUrl + "'/>"+
                                  "</a>"+
                                  "</div>";
                          
			  $('#results').append(content);
			}	
                        
                         //-- select the first item
                          var s =  $('.pic').first()
                                  .removeClass("not-selected")
                                  .addClass("selected");
                          
                          //--FancyBox --
                                $("a").fancybox({

                                   helpers: {
                                       title : {
                                           type : 'float'
                                       }
                                   }
                               });

                       
                       
		}
	);
}

//  fire when the player has finnished loading 

function onPlayerReady(event){
    event.target.playVideo();
}

function onPlayerStateChange(event){
    
    if(event.data === 0){
        $.fancybox.next();
    }
}


function onYouTubePlayerAPIReady(){
    
    $(document).ready(function(){
       $(".fancybox")
       .attr('rel','gallery')
       .fancybox({
        openEffect : 'none',
        closeEffect :'none',
        nextEffect : 'none',
        prevEffect : 'none',
        padding : 0,
        margin : 50,
        beforeShow : function(){
            
       var id = $.fancybox.inner.find('iframe').attr('id'); 
     
        var player = new YT.Player(id, {
                        events: {
                            'onReady': onPlayerReady,
                            'onStateChange':onPlayerStateChange
                        }
                        })
        }
       });
        
    });
    
}

</script>
</body>
</html>